<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    {% load static from staticfiles %}
    <script src="{% static 'js/jquery-1.12.2.min.js' %}"></script>
    <script src="{% static 'js/jquery-csrf.js' %}"></script>

    <!-- bootstrap은 3.3.7 -->
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.css' %}">
    <script src="{% static 'bootstrap/js/bootstrap.js' %}"></script>

    <link rel="stylesheet" type="text/css" href="{% static "css/saju_style.css" %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12">
            <div class="text-center">
                <a class="text_hover_none" href="{% url 'website:main_lang' lang=lang %}">
                    <p class="sajufortune_text">SajuFortune</p>
                </a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            {% include 'ad/_ad_banner.html' %}
        </div>
    </div>

    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>

    <!--여기서부턴 정사각형 목록-->

    <!--row 당 2개씩 -->

    <div class="row" id="content">
        <div class="col-sm-8 col-sm-offset-2 padding_side_7">
            <div class="media">
                <div class="media-body">

                    <p class="media-heading h4">
                        <small>birth: {{ birthday.year }}-{{ birthday.month }}-{{ birthday.day }}</small>
                    </p>

                    <p class="media-heading h4">
                        <small>about: {{ target.year }}-{{ target.month }}-{{ target.day }}</small>
                    </p>

                    <br>

                    {% block overall %}
                    <p class="media-heading h4">
                        Overall
                    </p>

                    <p class="media-heading h4">
                        <small><i>{{ overall.dayoverallenglish.quote }}</i></small>
                    </p>
                    <p>
                        {{ overall.dayoverallenglish.text|linebreaksbr }}
                    </p>
                    {% endblock %}

                    <br>

                    {% block emotion %}
                    <p class="media-heading h4">
                        Emotion
                    </p>

                    <p class="media-heading h4">
                        <small><i>{{ emotion.dayemotionenglish.quote }}</i></small>
                    </p>
                    <p>
                        {{ emotion.dayemotionenglish.text|linebreaksbr }}
                    </p>
                    {% endblock %}

                    <br>

                    <div class="col-xs-12 padding_side_5">
                        {% include 'ad/_ad_square_detail.html' %}
                    </div>

                    <br>
                    {% block love %}
                    <p class="media-heading h4">
                        Love
                    </p>

                    <p class="media-heading h4">
                        <small><i>{{ love.dayloveenglish.quote }}</i></small>
                    </p>
                    <p>
                        {{ love.dayloveenglish.text|linebreaksbr }}
                    </p>
                    {% endblock %}

                    <br>

                    {% block money %}
                    <p class="media-heading h4">
                        Money
                    </p>

                    <p class="media-heading h4">
                        <small><i>{{ money.daymoneyenglish.quote }}</i></small>
                    </p>
                    <p>
                        {{ money.daymoneyenglish.text|linebreaksbr }}
                    </p>
                    {% endblock %}

                    <br>

                    <div class="col-xs-12 padding_side_5">
                        {% include 'ad/_ad_square_detail.html' %}
                    </div>

                    <br>

                    {% block relationship %}
                    <p class="media-heading h4">
                        Relationships
                    </p>

                    <p class="media-heading h4">
                        <small><i>{{ relationships.dayrelationshipsenglish.quote }}</i></small>
                    </p>
                    <p>
                        {{ relationships.dayrelationshipsenglish.text|linebreaksbr }}
                    </p>
                    {% endblock %}

                    <br>

                    {% block work %}
                    <p class="media-heading h4">
                        Work
                    </p>

                    <p class="media-heading h4">
                        <small><i>{{ work.dayworkenglish.quote }}</i></small>
                    </p>
                    <p>
                        {{ work.dayworkenglish.text|linebreaksbr }}
                    </p>
                    {% endblock %}

                    <br>

                </div>
            </div>
        </div>
        <div class="col-sm-2 padding_side_5 mobile_display_none" style="" id="content_add">
            {% include 'ad/_ad_side_scrapper.html' %}
        </div>

    </div>
    <!-- more btn -->
    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2 padding_side_5 text-center">
            {% include 'snippet/_share_buttons.html' %}
        </div>
    </div>

    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2 padding_side_7">
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = 'https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v2.12';
              fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>
            <div class="fb-comments" data-href="{{ request.build_absolute_uri }}" data-width="100%" data-numposts="10"></div>
        </div>
    </div>
    <div class="row">
        <div class="btn_padder"></div>
        <div class="text-center">
            {% block today %}
                <a class="fa btn_saju btn_today_or_other" id="btn_today" href="">Today</a>
            {% endblock %}
        </div>
        <div class="btn_padder"></div>
        <div class="text-center">
            {% block tomorrow %}
                <a class="fa btn_saju btn_today_or_other" id="btn_tomorrow" href="">Tomorrow</a>
            {% endblock %}
        </div>
        <div class="btn_padder"></div>

        <div class="text-center">
            {% block dayaftertomorrow %}
                <a class="fa btn_saju btn_today_or_other" id="btn_dayaftertomorrow" href="">DayAfterTomorrow</a>
            {% endblock %}
        </div>

    </div>
    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            {% include 'ad/_ad_square_detail.html' %}
        </div>
    </div>
    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        <div class="col-sm-offset-3 col-sm-6">

            <div class="col-xs-offset-4 col-xs-4">
                <div class="text-center">
                    <a type="button" class="fa btn_saju width_80percent" href="{% url 'website:main_lang' lang=lang %}">
                    {% block go_list %}
                        go to main
                    {% endblock %}
                    </a>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>

</div>
{% block choose_phrase %}
    <div class="mobile_display_none desktop_display_none" id="url_today" data-sj="{% url 'website:day' lang='eng' %}"></div>
    <div class="mobile_display_none desktop_display_none" id="data_by" data-sj-by="{{ birthday.year }}"></div>
    <div class="mobile_display_none desktop_display_none" id="data_bm" data-sj-bm="{{ birthday.month }}"></div>
    <div class="mobile_display_none desktop_display_none" id="data_bd" data-sj-bd="{{ birthday.day }}"></div>

    <div class="mobile_display_none desktop_display_none" id="data_td" data-sj-td="{{ target.day }}"></div>
    <div class="mobile_display_none desktop_display_none" id="data_ad" data-sj-ad="{% include 'ad/_ad_side_scrapper.html' %}"></div>

{% endblock %}

</body>
<script>
    $(document).ready(function () {
        /* remove buttons */
        var br = "<br><br><br><br>"
        var adside = "<div class=\"bottom_0_absolute\"><div class=\"center-block ad_side_scrapper_wrapper\"><script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\""+">"+"<"+"/script>"+
                "<ins class=\"adsbygoogle ad_side_scrapper\" style=\"background-color: green\" data-ad-client=\"ca-pub-1234\" data-ad-slot=\"5678\"></ins>" + "<script>(adsbygoogle = window.adsbygoogle || []).push({});"+"<"+"/script>" + "</div></div>"
        var contentdiv = $('#content').height();
        if (contentdiv > 1600){
            $('#content_add').height(contentdiv)
            $('#content_add').append(br + adside)

        }
        var targetDate = new Date(new Date().getTime());
        var targetTomorrowDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
        var targetDayAfterTomorrowDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000 * 2);

        var selected_year, selected_month, selected_day;

        selected_year = $("#data_by").attr("data-sj-by");
        selected_month = $("#data_bm").attr("data-sj-bm");
        selected_day = $("#data_bd").attr("data-sj-bd");

        var target_day;
        target_day = $("#data_td").attr("data-sj-td");


        var target_today = targetDate.getDate();
        var target_tomorrow = targetTomorrowDate.getDate();
        var target_dayaftertomorrow = targetDayAfterTomorrowDate.getDate();

        if(target_today == target_day){
            $('#btn_today').remove();
        } else if (target_tomorrow == target_day){
            $('#btn_tomorrow').remove();
        } else if (target_dayaftertomorrow == target_day){
            $('#btn_dayaftertomorrow').remove();
        }


        /* get page by birth start */


        $('#btn_today').click(function (e) {
            e.preventDefault();
            /*location.href = "http://stackoverflow.com";*/

            if (selected_year!="" && selected_month!="" && selected_day!=""){

                var targetDate = new Date(new Date().getTime());

                var target_day = targetDate.getDate();
                var target_month = targetDate.getMonth() + 1;
                var target_year = targetDate.getFullYear();

                var by, bm, bd, ty, tm, td;
                by = parseInt(selected_year).toString(16);
                bm = parseInt(selected_month).toString(16);
                bd = parseInt(selected_day).toString(16);
                ty = target_year.toString(16);
                tm = target_month.toString(16);
                td = target_day.toString(16);

                location.href = $('#url_today').attr('data-sj') + "?by=" + by + "&bm=" + bm + "&bd=" + bd + "&ty=" + ty + "&tm=" + tm + "&td=" + td;
            }
            else {
                console.log("error")
            };
        });
        /* select birthday end*/


        $('#btn_tomorrow').click(function (e) {
            e.preventDefault();
            /*location.href = "http://stackoverflow.com";*/
            if (selected_year!="" && selected_month!="" && selected_day!=""){

                var targetDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);

                var target_day = targetDate.getDate();
                var target_month = targetDate.getMonth() + 1;
                var target_year = targetDate.getFullYear();

                var by, bm, bd, ty, tm, td;
                by = parseInt(selected_year).toString(16);
                bm = parseInt(selected_month).toString(16);
                bd = parseInt(selected_day).toString(16);
                ty = target_year.toString(16);
                tm = target_month.toString(16);
                td = target_day.toString(16);

                location.href = $('#url_today').attr('data-sj') + "?by=" + by + "&bm=" + bm + "&bd=" + bd + "&ty=" + ty + "&tm=" + tm + "&td=" + td;
            }
            else {
                console.log("error")
            };
        });


        $('#btn_dayaftertomorrow').click(function (e) {
            e.preventDefault();
            /*location.href = "http://stackoverflow.com";*/
            if (selected_year!="non_year" && selected_month!="non_month" && selected_day!="non_day"){

                var targetDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000 * 2);

                var target_day = targetDate.getDate();
                var target_month = targetDate.getMonth() + 1;
                var target_year = targetDate.getFullYear();

                var by, bm, bd, ty, tm, td;
                by = parseInt(selected_year).toString(16);
                bm = parseInt(selected_month).toString(16);
                bd = parseInt(selected_day).toString(16);
                ty = target_year.toString(16);
                tm = target_month.toString(16);
                td = target_day.toString(16);

                location.href = $('#url_today').attr('data-sj') + "?by=" + by + "&bm=" + bm + "&bd=" + bd + "&ty=" + ty + "&tm=" + tm + "&td=" + td;
            }
            else {
                console.log("error")
            };
        });
        /* get page by birth end */
    });
</script>

</html>