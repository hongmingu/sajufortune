<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    {% load static from staticfiles %}
    <script src="{% static 'js/jquery-1.12.2.min.js' %}"></script>
    <script src="{% static 'js/jquery-csrf.js' %}"></script>
    <script src="{% static 'js/side_ad_adder.js' %}"></script>

    <!-- bootstrap은 3.3.7 -->
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.css' %}">
    <script src="{% static 'bootstrap/js/bootstrap.js' %}"></script>

    <link rel="stylesheet" type="text/css" href="{% static "css/saju_style.css" %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-xs-12">
            <div class="text-center">
                <a class="text_hover_none" href="{% url 'website:main_lang' lang=lang %}">
                    <p class="sajufortune_text">SajuFortune</p>
                </a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            {% include 'ad/_ad_banner.html' %}
        </div>
    </div>

    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>

    <!--여기서부턴 정사각형 목록-->

    <!--row 당 2개씩 -->

    <div class="row">
        {% include 'snippet/day/detail/_day_detail_eng.html' %}
    </div>
    <!-- more btn -->
    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        {% include 'snippet/others/_share_buttons.html' %}
    </div>

    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        {% include 'snippet/others/facebook_reply.html' %}
    </div>
    <div class="row">
        <div class="btn_padder"></div>
        <div class="text-center">
            {% block today %}
                <a class="fa btn_saju btn_today_or_other" id="btn_today" href="">Today</a>
            {% endblock %}
        </div>
        <div class="btn_padder"></div>
        <div class="text-center">
            {% block tomorrow %}
                <a class="fa btn_saju btn_today_or_other" id="btn_tomorrow" href="">Tomorrow</a>
            {% endblock %}
        </div>
        <div class="btn_padder"></div>

        <div class="text-center">
            {% block dayaftertomorrow %}
                <a class="fa btn_saju btn_today_or_other" id="btn_dayaftertomorrow" href="">DayAfterTomorrow</a>
            {% endblock %}
        </div>
    </div>
    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        {% include 'ad/_ad_square_detail.html' %}
    </div>
    <div class="row">
        <div class="btn_padder"></div>
        <div class="btn_padder"></div>
    </div>
    <div class="row">
        <div class="col-sm-offset-3 col-sm-6">

            <div class="col-xs-offset-4 col-xs-4">
                <div class="text-center">
                    <a type="button" class="fa btn_saju width_80percent" href="{% url 'website:main_lang' lang=lang %}">
                    {% block go_list %}
                        go to main
                    {% endblock %}
                    </a>
                </div>
            </div>
        </div>
    </div>

    {% if other_celebs %}
        <div class="row">
            <div class="btn_padder"></div>
            <div class="col-xs-12 text-center">
                {% block what_about_other_celeb %}
                    <p class="h3 about_saju">What about their's</p>
                {% endblock %}
            </div>
            <div class="btn_padder"></div>

        </div>
        <div class="row">
            <!--이건 더미 정사각형-->
            {% block other_posts_objects %}
                {% for celeb in other_celebs %}
                    <div class="col-sm-6 padding_side_5">
                        <div class="center-block square_list_wrapper">
                            <!-- 이미지인데 여기서 이미지는 이미지 자체가 350*250이다 -->
                            {% if request.GET.ty and request.GET.tm and request.GET.ty %}
                                <a href="{% url 'celebrity:day' lang=lang num=celeb.pk %}?ty={{ request.GET.ty }}&tm={{ request.GET.tm }}&td={{ request.GET.td }}">
                            {% else %}
                                <a href="{% url 'celebrity:profile' lang=lang num=celeb.pk %}">
                            {% endif %}
                            {% if celeb.photo %}
                                <img class="img_350_250 img_clickable" src="{{ celeb.photo.url }}">
                            {% else %}
                                <div class="text-center">
                                    <div class="fa btn_saju img_clickable img_350_250">
                                        Sorry, No Image
                                    </div>
                                </div>
                            {% endif %}
                            </a>
                            <div class="btn_padder"></div>
                            <!-- text -->
                            <div class="text-center">
                                {% if request.GET.ty and request.GET.tm and request.GET.ty %}

                                <p class="inherit_color">
                                    <a class="ban_bs_text_link list_text h3" href="{% url 'celebrity:day' lang=lang num=celeb.pk %}?ty={{ request.GET.ty }}&tm={{ request.GET.tm }}&td={{ request.GET.td }}">
                                        {{ celeb.celebrityenglish.name }}
                                    </a>
                                </p>
                                {% else %}
                                <p class="inherit_color">
                                    <a class="ban_bs_text_link list_text h3" href="{% url 'celebrity:profile' lang=lang num=celeb.pk %}">
                                        {{ celeb.celebrityenglish.name }}
                                    </a>
                                </p>
                                {% endif %}

                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endblock %}
        </div>
    {% endif %}

    <div class="row">

        <div class="col-xs-12">
            {% include 'ad/_ad_banner.html' %}
        </div>
    </div>

    <div class="row">
        <div class="btn_padder"></div>
    </div>

</div>
{% block choose_phrase %}
    <div class="mobile_display_none desktop_display_none" id="url_today" data-sj="{% url 'website:day' lang='eng' %}"></div>
    <div class="mobile_display_none desktop_display_none" id="data_by" data-sj-by="{{ birthday.year }}"></div>
    <div class="mobile_display_none desktop_display_none" id="data_bm" data-sj-bm="{{ birthday.month }}"></div>
    <div class="mobile_display_none desktop_display_none" id="data_bd" data-sj-bd="{{ birthday.day }}"></div>

    <div class="mobile_display_none desktop_display_none" id="data_td" data-sj-td="{{ target.day }}"></div>

{% endblock %}

</body>
<script>
    $(document).ready(function () {

        var targetDate = new Date(new Date().getTime());
        var targetTomorrowDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
        var targetDayAfterTomorrowDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000 * 2);

        var selected_year, selected_month, selected_day;

        var target_day;
        target_day = $("#data_td").attr("data-sj-td");


        var target_today = targetDate.getDate();
        var target_tomorrow = targetTomorrowDate.getDate();
        var target_dayaftertomorrow = targetDayAfterTomorrowDate.getDate();

        if(target_today == target_day){
            $('#btn_today').remove();
        } else if (target_tomorrow == target_day){
            $('#btn_tomorrow').remove();
        } else if (target_dayaftertomorrow == target_day){
            $('#btn_dayaftertomorrow').remove();
        }
        /* remove buttons end */

        /* get page by birth start */
        selected_year = $("#data_by").attr("data-sj-by");
        selected_month = $("#data_bm").attr("data-sj-bm");
        selected_day = $("#data_bd").attr("data-sj-bd");


        $('#btn_today').click(function (e) {
            e.preventDefault();

            if (selected_year!="" && selected_month!="" && selected_day!=""){

                var targetDate = new Date(new Date().getTime());

                var target_day = targetDate.getDate();
                var target_month = targetDate.getMonth() + 1;
                var target_year = targetDate.getFullYear();

                var by, bm, bd, ty, tm, td;
                by = parseInt(selected_year).toString(16);
                bm = parseInt(selected_month).toString(16);
                bd = parseInt(selected_day).toString(16);
                ty = target_year.toString(16);
                tm = target_month.toString(16);
                td = target_day.toString(16);

                location.href = $('#url_today').attr('data-sj') + "?by=" + by + "&bm=" + bm + "&bd=" + bd + "&ty=" + ty + "&tm=" + tm + "&td=" + td;
            }
            else {
                console.log("error")
            }
        });


        $('#btn_tomorrow').click(function (e) {
            e.preventDefault();
            if (selected_year!="" && selected_month!="" && selected_day!=""){

                var targetDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);

                var target_day = targetDate.getDate();
                var target_month = targetDate.getMonth() + 1;
                var target_year = targetDate.getFullYear();

                var by, bm, bd, ty, tm, td;
                by = parseInt(selected_year).toString(16);
                bm = parseInt(selected_month).toString(16);
                bd = parseInt(selected_day).toString(16);
                ty = target_year.toString(16);
                tm = target_month.toString(16);
                td = target_day.toString(16);

                location.href = $('#url_today').attr('data-sj') + "?by=" + by + "&bm=" + bm + "&bd=" + bd + "&ty=" + ty + "&tm=" + tm + "&td=" + td;
            }
            else {
                console.log("error")
            }
        });


        $('#btn_dayaftertomorrow').click(function (e) {
            e.preventDefault();
            if (selected_year!="non_year" && selected_month!="non_month" && selected_day!="non_day"){

                var targetDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000 * 2);

                var target_day = targetDate.getDate();
                var target_month = targetDate.getMonth() + 1;
                var target_year = targetDate.getFullYear();

                var by, bm, bd, ty, tm, td;
                by = parseInt(selected_year).toString(16);
                bm = parseInt(selected_month).toString(16);
                bd = parseInt(selected_day).toString(16);
                ty = target_year.toString(16);
                tm = target_month.toString(16);
                td = target_day.toString(16);

                location.href = $('#url_today').attr('data-sj') + "?by=" + by + "&bm=" + bm + "&bd=" + bd + "&ty=" + ty + "&tm=" + tm + "&td=" + td;
            }
            else {
                console.log("error")
            }
        });
        /* get page by birth end */
    });
</script>
</html>